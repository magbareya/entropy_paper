\documentclass{article}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\setcounter{section}{-1}

\author{Mahmoud Agbareya}
\date{5-Oct-2016}

\begin{document}
	\section{Assumptions}
		Currently, we assume the following assumptions (using Alex's paper notions):
		\begin{itemize}
			\item $ \epsilon_\tau = 0 $ and $ \tau = 1 $
			\item $f$ is balanced, so: $ \mathbb{E} f = 1/2 $
			\item $ \beta = 0 $ and $ \gamma = \alpha $
			\item $ h = f $
			\item $\epsilon_1 = \epsilon$ and $\lambda_1 = \lambda $
		\end{itemize}
		
		
	\section{Extension of the FKN theorem (JOW's paper)}
		\subsection{Theorem 5.1:}
			There exists some $ k \in \{0,1, \dots . n\} $ such that:
			$$ a_k^2 \geq 1 - \frac{9 + \sqrt{17}}{2} \cdot \rho^2 $$
			Also,
			\begin{equation} \label{thm5:1}
				\rho \leq d \leq \left( 9 + \sqrt{17} \right) ^ {1/2} \cdot \rho
			\end{equation}
			and
			\begin{equation} \label{thm5:2}
				d \leq \left( \frac{9 + \sqrt{17}}{2}  \right) ^ {1/2} \cdot \rho + o(\rho)
			\end{equation}
			as $ \rho \rightarrow 0 $
	
		\subsection{Theorem 5.3:}
			\subsubsection{the theorem as stated in the paper:}
				There exists a universal constant $L > 0$ with the following property: For $ f : \{-1,1\}^n \rightarrow \{-1,1\}$, let:
				$$ \rho = \left( \sum_{A \subseteq [n]: |A| \geq 2} |\hat{f}(A)|^2 \right) ^ {1/2} $$
				Then, there exists some $ B \subseteq [n] $ with $|B| \leq 1 $ such that
				$$ \sum_{A \subseteq [n]: |A| \leq 1, A \neq B} |\hat{f}(A)|^2 \leq L \cdot \rho^4 ln(2/\rho)$$
				and $ |\hat{f}(B)|^2 \geq 1 - \rho^2 - L \cdot \rho^4 ln(2/\rho) $
				\paragraph{(part of the) Proof:}
					Let $a_i = \hat{f}(\{i\})$
					\begin{equation} \label{eq5:1}
						\sum_{i \in \{0,1, \dots , n\} \backslash \{k\}} a_i^2 \leq 2d^4log_2(2/d)
					\end{equation}		
			\subsubsection{extracting value of the universal constant}
				If we substitute (\ref{thm5:1}) in (\ref{eq5:1}) we have:
				\begin{equation} \label{detailedConst}
					\sum_{i \in \{0,1, \dots , n\} \backslash \{k\}} a_i^2 
					\leq 2d^4log_2(2/d) 
					\leq 2 \left( 9 + \sqrt{17} \right) ^ 2 \cdot \rho^4 \cdot log_2(2/\rho)
				\end{equation}
	
	
	\newpage
	\section{On the entropy of a noisy function (Alex's paper)}
		\subsection{Theorem 5.5}
			Depending on (\ref{detailedConst}) we can restate theorem 5.5 to the following form:
			\paragraph{Theorem 5.5:} \textit{For $ g: \{0,1\}^n \rightarrow \{-1,1\}$, let $\rho = \left( \sum_{A \subseteq [n]: |A| \geq 2} \hat{g}^2(A) \right) ^ {1/2} $. Then there exists some $ B \subseteq [n]$ with $|B| \leq 1$ such that:}
				$$  \sum_{A \subseteq [n]: |A| \leq 1, A \neq B} \hat{g}^2 (A) \leq 2 \left( 9 + \sqrt{17} \right)^2 \cdot \rho^4 \cdot log \left( \frac{2}{\rho} \right) $$
	
		\subsection{Equation (20)}
			It is true with $L=2$ :
			\begin{equation} \label{eq:20}
				\sum_{|A| \geq 2} \hat{f}^2 (A) 
				\leq \sum_{|A| \geq 2} \hat{g}^2 (A) 
				\leq 1 - \hat{g}^2(\{1\}) = 1 - \left( 1 + \gamma^2 - 2 \gamma \right) = 2 \gamma - \gamma^2 
				\leq 2 \gamma
			\end{equation}
	
		\subsection{Equation (21)}
			Using (\ref{detailedConst}), we have the following:
			\begin{equation} \label{eq:21}
				\sum_{k=2}^n \hat{f}^2 \left( \{k\} \right) 
				\leq \sum_{k=2}^n \hat{g}^2 \left( \{k\} \right) 
				\leq \left( 9 + \sqrt{17} \right) ^ 2 \cdot \gamma ^2 \cdot log \left( \frac{1}{\gamma} \right)
			\end{equation}
	
		\subsection{Proof of Lemma 5.2}
			The first inequality appears in proof of lemma 5.2, so, depending on (\ref{eq:20}) and (\ref{eq:21}) we have:
			\begin{equation} \label{lemma5:2}\begin{aligned}
				\mathop{\mathbb{E}}_{T, 1 \notin T} Ent(g_T)
				& \leq \frac{2}{ln2} \cdot \frac{1}{\mathbb{E} f} \cdot \sum_{S, 1 \notin S} |S| \lambda^{|S|} \hat{f}^2(S) \\
				& \leq \frac{4}{ln2} \cdot \left( \sum_{|S| \geq 2} |S| \lambda^{|S|} \hat{f}^2(S) + \sum_{k=2}^n \hat{f}^2 \left( \{k\} \right) \cdot \lambda \right) \\
				& \leq \frac{4}{ln2}  \cdot \left( 2 \lambda^2 \cdot \sum_{|S| \geq 2} \hat{f}^2(S) + \lambda \cdot \sum_{k=2}^n \hat{f}^2 \left( \{k\} \right) \right) \\
				& \leq \frac{4}{ln2} \cdot \left( 4 ( \lambda^2 \gamma ) + \left( 9 + \sqrt{17} \right)^2 \cdot \left( \lambda \gamma^2 log \left( \frac{1}{\gamma} \right) \right) \right)
			\end{aligned}
			\end{equation}
			%I think we require here (in the 3rd line) that $\lambda \leq 2/3$.
		
		\newpage
		\subsection{Proof of Lemma 5.1}
			\subsubsection{Lemma 5.1}
				For constant $L$, and for $f$ that satisfies the conditions of theorem 1.14, we have:
				\begin{equation} \label{Lemma5:1}
					\mathop{\mathbb{E}}_{T,1 \in T} \left( Ent \left( f \mid T \right) - Ent \left( f \mid \{1\} \right) \right) \leq L \cdot \left( \lambda \gamma + \gamma^2 ln \left( \frac{1}{\gamma} \right) \right)
				\end{equation}
			
			\subsubsection{Equation 22}
				\begin{equation}
					\mathop{\mathbb{E}}_{T,1 \in T} Ent \left( g_T \mid x_1 = 0,x_2, \cdots, x_n \right) \leq L \cdot \lambda \gamma
				\end{equation}
            
			\begin{proof}
				Depending on (\ref{eq:20}) and (\ref{eq:21}), and in similar way as the proof of (\ref{lemma5:2}) we have:
				\begin{equation} \label{boundForR}
					\sum_{R, 1 \notin R} |R| \lambda^{|R|} \hat{f}^2(R) 
					\leq 4 ( \lambda^2 \gamma ) + \left( 9 + \sqrt{17} \right)^2 \cdot \left( \lambda \gamma^2 log \left( \frac{1}{\gamma} \right) \right)
				\end{equation}

				Also
				
				\begin{equation} \label{boundForR+1}
					\sum_{R, 1 \notin R} |R| \lambda^{|R|} \hat{f}^2(R \cup \{1\}) 
					\leq 2 \cdot \lambda \cdot \sum_{R, 1 \notin R} \hat{f}^2(R \cup \{1\})
					\leq 2 \cdot \lambda \cdot \sum_{|R| \geq 2} \hat{f}^2(R)
					\leq 4 \cdot \lambda \gamma
				\end{equation}
				
				If we fix a subset $T \subset [n]$ with $1 \in T$, then:
				\begin{equation} \label{g_T with x1=0}
					\mathbb{E} \left( g_T \mid x_1 = 0,x_2, \cdots, x_n \right) = \sum_{R \subseteq T \backslash \{1\}} \left( \hat{f}(R) + \hat{f}(R \cup \{1\}) \right) \cdot W_R
				\end{equation}
				And,
				\begin{equation}
					\mathbb{E} \left( g_T \mid x_1=0 \right) = \hat{f}(0) + \hat{f}(\{1\}) = \mathbb{E} f \cdot \left( 1 + (1-\alpha) \right) = (2-\alpha) \cdot \mathbb{E} f \geq \mathbb{E} f 
				\end{equation}
				In particular, using (19) from the original article, we have:				
				\begin{equation} \label{entGtX0} \begin{aligned}
					Ent \left( g_T \mid x_1 = 0,x_2, \cdots, x_n \right) 
					& \leq \frac{2}{ln 2} \cdot \frac{1}{\mathbb{E} \left( g_T \mid x_1=0 \right)} \cdot \sum_{R \subseteq {T\backslash \{1\}}} |R| \cdot \left( \hat{f} (R) + \hat{f} (R \cup \{1\}) \right)^2 \\ 
					& \leq \frac{2}{ln 2} \cdot \frac{1}{\mathbb{E} f} \cdot \sum_{R \subseteq {T\backslash \{1\}}} |R| \lambda^{|R|} \left( \hat{f} (R) + \hat{f} (R \cup \{1\}) \right)^2 \\ 
					& = \frac{4}{ln 2} \cdot \sum_{R \subseteq {T\backslash \{1\}}} |R| \lambda^{|R|} \left( \hat{f}^2 (R) + \hat{f}^2 (R \cup \{1\}) + 2 \cdot \hat{f}(R)  \cdot \hat{f} (R \cup \{1\}) \right) \\ 
					& \leq \frac{8}{ln 2} \cdot \sum_{R \subseteq {T\backslash \{1\}}} |R| \lambda^{|R|}  \left( \hat{f}^2 (R) + \hat{f}^2 (R \cup \{1\}) \right)
				\end{aligned}
				\end{equation}
				
				Averaging over $T$ and depending on (\ref{boundForR}), (\ref{boundForR+1}) and (\ref{entGtX0}) we have:
				\begin{equation} \label{final22} \begin{aligned}
					\mathop{\mathbb{E}}_{T, 1 \in T} Ent \left( g_T \mid x_1 = 0,x_2, \cdots, x_n \right)
					& \leq \frac{8}{ln 2} \cdot \left( \left( 4 ( \lambda^2 \gamma ) + \left( 9 + \sqrt{17} \right)^2 \cdot \left( \lambda \gamma^2 log \left( \frac{1}{\gamma} \right) \right) \right)  + 4 \cdot \lambda \gamma \right) \\
					& \leq \frac{8}{ln 2} \cdot \left( 4 \cdot \lambda \gamma + 64 \cdot \lambda \gamma + 4 \cdot \lambda \gamma \right) \\
					& = \frac{576}{ln 2} \cdot \lambda \gamma < 831 \cdot \lambda \gamma
				\end{aligned}			
				\end{equation}
			\end{proof}
			
			\subsubsection{Equation 23}
				\begin{equation}
					\mathop{\mathbb{E}}_{T,1 \in T} Ent \left( g_T \mid x_1 = 1,x_2, \cdots, x_n \right) \leq L \cdot \left( \lambda \gamma + \gamma^2 ln \left( \frac{1}{\gamma} \right) \right)
				\end{equation}
				\begin{proof}
					Similarly to what we have in \ref{g_T with x1=0}, we have:
					\begin{equation} \label{g_T with x1=1}
						\mathbb{E} \left( g_T \mid x_1 = 1,x_2, \cdots, x_n \right) = \sum_{R \subset T \backslash \{1\}} \left( \hat{f}(R) - \hat{f}(R \cup \{1\}) \right) \cdot W_R
					\end{equation}
					So, depending on the definition of $\alpha$ and $\lambda$ (in our case, we always have $\alpha \geq \lambda$):
					\begin{equation}
						\mathbb{E} \left( g_T \mid x_1=1 \right) = \hat{f} (0) - \hat{f} (\{1\}) = \mathbb{E}f \cdot \left( 1 - \left (1- \alpha \right) \right) \geq \lambda \cdot \mathbb{E} f
					\end{equation}
					Let $g = \mathbb{E} \left( f \mid x_1 = 1,x_2, \cdots, x_n \right)$. \\
					Applying (19) from the original paper, and averaging over $T$, we have:
					%I'm not sure from the first inequality because (g_T|x_1=1) is not balanced... so its expectation is not 1/2. and we need to multiply by 1/'lambda because we are taking expectation, and this is the propability of taking T s.t. 1\in T (I think).
					\begin{equation} \label{Ent with x_1 = 1 V1} \begin{aligned}
						\mathop{\mathbb{E}}_{T,1 \in T} Ent \left( g_T \mid x_1 = 1,x_2, \cdots, x_n \right) 
						& \leq \frac{2}{ln 2} \cdot \frac{1}{\mathbb{E} \left( g_T \mid x_1=1 \right)} \cdot \sum_{R \subseteq {T\backslash \{1\}}} |R| \lambda^{|R|} \left( \hat{f} (R) - \hat{f} (R \cup \{1\}) \right)^2 \\
						& \leq \frac{4}{\lambda \cdot ln 2} \cdot \sum_{R \subseteq {T\backslash \{1\}}} |R| \lambda^{|R|} \left( \hat{f} (R) - \hat{f} (R \cup \{1\}) \right)^2 \\ 
						& = \frac{4}{\lambda \cdot ln 2} \cdot \sum_{R \subseteq {T\backslash \{1\}}} |R| \lambda^{|R|} \hat{g}^2 (R)
					\end{aligned} 
					\end{equation}
				%I'm not sure why is g a boolean function... (next line)
				$g$ is a boolean function whose expectation equals to: $ \hat{f}(0) - \hat{f}(\{1\}) = \alpha \cdot \mathbb{E} f \leq \alpha \leq \gamma $, similarly: $ \mathbb{E}g^2 = \mathbb{E}g \leq \alpha \leq \gamma$ (we depended on $\alpha \leq \gamma$. actually, in our case we have $\alpha = \gamma$)
				\paragraph{Inequality of Talagrand}
					\textit{For a boolean function $g:\{0,1\}^m \rightarrow \{0,1\}$ with expectation $\mu \leq 1/2 $ holds $ \sum_{k=1}^m \hat{g}^2(\{k\}) \leq \left( 2 + \sqrt{2} \right)^2 \cdot \mu^2 \cdot ln(1/\mu).$ }
				
				\paragraph{}
				So, in our case we have: %I'm not sure the last inequality is true.
				\begin{equation} \begin{aligned} \label{Talagrand for g}
					 \sum_{k=2}^n \hat{g}^2 \left( \{k\} \right) 
					 & \leq \left( 2 + \sqrt{2} \right)^2 \cdot \mathbb{E}^2 f \cdot ln \left( \frac{1}{\mathbb{E} f} \right) 
					 \leq \left( 2 + \sqrt{2} \right)^2 \cdot \alpha^2 \cdot ln \left( \frac{1}{\alpha} \right) \\
					 & \leq \left( 2 + \sqrt{2} \right)^2 \cdot \gamma^2 \cdot ln \left( \frac{1}{\gamma} \right)
				 \end{aligned}
				 \end{equation}
				 
				 %I'm not sure we can use eq:20 here... because f_1 doesn't satisfy the conditions of theorem 1.14...
				 Depending on (\ref{eq:20}) and (\ref{Talagrand for g}) we can continue (\ref{Ent with x_1 = 1 V1}) by:				 
				 \begin{equation}\begin{aligned}
					\mathop{\mathbb{E}}_{T,1 \in T} Ent \left( g_T \mid x_1 = 1,x_2, \cdots, x_n \right) 
					& \leq \frac{4}{\lambda \cdot ln 2} \cdot \left( \lambda \cdot \sum_{k=2}^n \hat{g}^2 (\{k\}) + 2 \lambda^2 \sum_{|A| \geq 2} \hat{g}^2  \right) \\
					& \leq \frac{4}{\lambda \cdot ln 2} \cdot \left( \left( 2 + \sqrt{2} \right)^2 \lambda \gamma^2 ln \left( \frac{1}{\gamma} \right) + 4 \lambda^2 \gamma  \right) \\
					& = \frac{16}{ln 2} \cdot \left( \left( 1 + \frac{1}{\sqrt{2}} \right)^2 \gamma^2 ln \left( \frac{1}{\gamma} \right) + \lambda \gamma  \right) \\
					& \leq \frac{16}{ln 2} \cdot \left( 3 \cdot \gamma^2 ln \left( \frac{1}{\gamma} \right) + \lambda \gamma  \right) \\
					%here we can take a smaller constant if we assume lower bound on lambda, e.g. if we require \lambda \geq 1/2, we can replace 48 by 30.
					& \leq \frac{48}{ln 2} \cdot \left( \gamma^2 ln \left( \frac{1}{\gamma} \right) + \lambda \gamma  \right)
				\end{aligned}
				 \end{equation}
				 \end{proof}
				 
				 \subsubsection{Proof of the lemma}
				 	Let $g_T = \mathbb{E} \left( f \mid T \right)$ for a subset $T \subseteq [n]$. Note that if $1 \in T$ then $ \mathbb{E} \left( g_T \mid \{1\} \right) =  \mathbb{E} \left( f \mid \{1\} \right) $. 
				 	
				 	\paragraph{}
				 	Hence:
				 	\begin{equation} \begin{aligned}
				 		& \mathop{\mathbb{E}}_{T,1 \in T} \left( Ent \left( f \mid T \right) - Ent \left( f \mid \{1\} \right) \right) =
				 		\mathop{\mathbb{E}}_{T,1 \in T} \left( Ent \left( g_T \mid T \right) - Ent \left( g_T \mid \{1\} \right) \right) = \\
				 		& \frac{1}{2} \cdot \mathop{\mathbb{E}}_{T,1 \in T} Ent \left( g_T \mid x_1 = 0,x_2, \cdots, x_n \right) + \frac{1}{2} \mathop{\mathbb{E}}_{T,1 \in T} Ent \left( g_T \mid x_1 = 1,x_2, \cdots, x_n \right) \\
				 		& \leq \frac{288}{ln2} \cdot \lambda \gamma + \frac{8}{ln2} \cdot \left( 3 \cdot \gamma^2 ln \left( \frac{1}{\gamma} \right) + \lambda \gamma  \right)
				 		= \frac{296}{ln2} \cdot \lambda \gamma +\frac{24}{ln2} \cdot \gamma^2 ln \left( \frac{1}{\gamma} \right) 
				 	\end{aligned} 
				 	\end{equation}
				 
\end{document}